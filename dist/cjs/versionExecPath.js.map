{"version":3,"sources":["versionExecPath.ts"],"sourcesContent":["const path = require('path');\nconst spawnSync = require('cross-spawn-cb').sync;\nconst resolveVersion = require('node-resolve-versions');\nconst versionUse = require('node-version-use');\nconst accessSync = require('fs-access-sync-compat');\n\nconst isWindows = process.platform === 'win32';\nconst NODE = isWindows ? 'node.exe' : 'node';\n\nexport default function versionExecPath(version) {\n  const versions = resolveVersion.sync(version);\n  if (versions.length > 1) throw new Error('Multiple versions match: ' + version + ' = ' + versions.join(',') + '. Please be specific');\n  const installPath = path.join(versionUse.installDirectory(), versions[0]);\n  const binRoot = isWindows ? installPath : path.join(installPath, 'bin');\n  const execPath = path.join(binRoot, NODE);\n\n  try {\n    // ensure installed\n    accessSync(installPath);\n  } catch (err) {\n    // need to install\n    try {\n      spawnSync('nvu', [versions[0], NODE, '--version'], { stdio: 'string' });\n    } catch (err) {\n      if (!err.stderr || err.stderr.indexOf('ExperimentalWarning') < 0) throw err;\n    }\n  }\n  return execPath;\n}\n"],"names":["versionExecPath","version","versions","resolveVersion","sync","length","Error","join","installPath","path","versionUse","installDirectory","binRoot","isWindows","execPath","NODE","accessSync","err","spawnSync","stdio","stderr","indexOf","require","process","platform"],"mappings":"AAAA;;;;kBASwBA,eAAe;AAAxB,SAASA,eAAe,CAACC,OAAO,EAAE;IAC/C,IAAMC,QAAQ,GAAGC,cAAc,CAACC,IAAI,CAACH,OAAO,CAAC,AAAC;IAC9C,IAAIC,QAAQ,CAACG,MAAM,GAAG,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,2BAA2B,GAAGL,OAAO,GAAG,KAAK,GAAGC,QAAQ,CAACK,IAAI,CAAC,GAAG,CAAC,GAAG,sBAAsB,CAAC,CAAC;IACtI,IAAMC,WAAW,GAAGC,IAAI,CAACF,IAAI,CAACG,UAAU,CAACC,gBAAgB,EAAE,EAAET,QAAQ,CAAC,CAAC,CAAC,CAAC,AAAC;IAC1E,IAAMU,OAAO,GAAGC,SAAS,GAAGL,WAAW,GAAGC,IAAI,CAACF,IAAI,CAACC,WAAW,EAAE,KAAK,CAAC,AAAC;IACxE,IAAMM,QAAQ,GAAGL,IAAI,CAACF,IAAI,CAACK,OAAO,EAAEG,IAAI,CAAC,AAAC;IAE1C,IAAI;QACF,mBAAmB;QACnBC,UAAU,CAACR,WAAW,CAAC,CAAC;KACzB,CAAC,OAAOS,GAAG,EAAE;QACZ,kBAAkB;QAClB,IAAI;YACFC,SAAS,CAAC,KAAK,EAAE;gBAAChB,QAAQ,CAAC,CAAC,CAAC;gBAAEa,IAAI;gBAAE,WAAW;aAAC,EAAE;gBAAEI,KAAK,EAAE,QAAQ;aAAE,CAAC,CAAC;SACzE,CAAC,OAAOF,IAAG,EAAE;YACZ,IAAI,CAACA,IAAG,CAACG,MAAM,IAAIH,IAAG,CAACG,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAC,GAAG,CAAC,EAAE,MAAMJ,IAAG,CAAC;SAC7E;KACF;IACD,OAAOH,QAAQ,CAAC;CACjB;AA5BD,IAAML,IAAI,GAAGa,OAAO,CAAC,MAAM,CAAC,AAAC;AAC7B,IAAMJ,SAAS,GAAGI,OAAO,CAAC,gBAAgB,CAAC,CAAClB,IAAI,AAAC;AACjD,IAAMD,cAAc,GAAGmB,OAAO,CAAC,uBAAuB,CAAC,AAAC;AACxD,IAAMZ,UAAU,GAAGY,OAAO,CAAC,kBAAkB,CAAC,AAAC;AAC/C,IAAMN,UAAU,GAAGM,OAAO,CAAC,uBAAuB,CAAC,AAAC;AAEpD,IAAMT,SAAS,GAAGU,OAAO,CAACC,QAAQ,KAAK,OAAO,AAAC;AAC/C,IAAMT,IAAI,GAAGF,SAAS,GAAG,UAAU,GAAG,MAAM,AAAC"}