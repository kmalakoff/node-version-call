{"version":3,"sources":["versionExecPath.ts"],"sourcesContent":["const path = require('path');\nconst accessSync = require('fs-access-sync-compat');\nconst constants = require('./constants');\nlet resolveVersion = null; // break dependencies\n\nexport default function versionExecPath(version) {\n  if (!resolveVersion) resolveVersion = require('node-resolve-versions'); // break dependencies\n\n  const versions = resolveVersion.sync(version);\n  if (versions.length > 1) throw new Error('Multiple versions match: ' + version + ' = ' + versions.join(',') + '. Please be specific');\n  const installPath = path.join(constants.installDirectory, versions[0]);\n  const binRoot = constants.isWindows ? installPath : path.join(installPath, 'bin');\n  const execPath = path.join(binRoot, constants.node);\n\n  try {\n    // ensure installed\n    accessSync(installPath);\n  } catch (err) {\n    // need to install\n    try {\n      require('cross-spawn-cb').sync('nvu', [versions[0], constants.node, '--version'], { encoding: 'utf8' });\n    } catch (err) {\n      if (!err.stderr || err.stderr.indexOf('ExperimentalWarning') < 0) throw err;\n    }\n  }\n  return execPath;\n}\n"],"names":["versionExecPath","version","resolveVersion","require","versions","sync","length","Error","join","installPath","path","constants","installDirectory","binRoot","isWindows","execPath","node","accessSync","err","encoding","stderr","indexOf"],"mappings":"AAAA;;;;kBAKwBA,eAAe;AAAxB,SAASA,eAAe,CAACC,OAAO,EAAE;IAC/C,IAAI,CAACC,cAAc,EAAEA,cAAc,GAAGC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,qBAAqB;IAE7F,IAAMC,QAAQ,GAAGF,cAAc,CAACG,IAAI,CAACJ,OAAO,CAAC,AAAC;IAC9C,IAAIG,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,2BAA2B,GAAGN,OAAO,GAAG,KAAK,GAAGG,QAAQ,CAACI,IAAI,CAAC,GAAG,CAAC,GAAG,sBAAsB,CAAC,CAAC;IACtI,IAAMC,WAAW,GAAGC,IAAI,CAACF,IAAI,CAACG,SAAS,CAACC,gBAAgB,EAAER,QAAQ,CAAC,CAAC,CAAC,CAAC,AAAC;IACvE,IAAMS,OAAO,GAAGF,SAAS,CAACG,SAAS,GAAGL,WAAW,GAAGC,IAAI,CAACF,IAAI,CAACC,WAAW,EAAE,KAAK,CAAC,AAAC;IAClF,IAAMM,QAAQ,GAAGL,IAAI,CAACF,IAAI,CAACK,OAAO,EAAEF,SAAS,CAACK,IAAI,CAAC,AAAC;IAEpD,IAAI;QACF,mBAAmB;QACnBC,UAAU,CAACR,WAAW,CAAC,CAAC;KACzB,CAAC,OAAOS,GAAG,EAAE;QACZ,kBAAkB;QAClB,IAAI;YACFf,OAAO,CAAC,gBAAgB,CAAC,CAACE,IAAI,CAAC,KAAK,EAAE;gBAACD,QAAQ,CAAC,CAAC,CAAC;gBAAEO,SAAS,CAACK,IAAI;gBAAE,WAAW;aAAC,EAAE;gBAAEG,QAAQ,EAAE,MAAM;aAAE,CAAC,CAAC;SACzG,CAAC,OAAOD,IAAG,EAAE;YACZ,IAAI,CAACA,IAAG,CAACE,MAAM,IAAIF,IAAG,CAACE,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAC,GAAG,CAAC,EAAE,MAAMH,IAAG,CAAC;SAC7E;KACF;IACD,OAAOH,QAAQ,CAAC;CACjB;AA1BD,IAAML,IAAI,GAAGP,OAAO,CAAC,MAAM,CAAC,AAAC;AAC7B,IAAMc,UAAU,GAAGd,OAAO,CAAC,uBAAuB,CAAC,AAAC;AACpD,IAAMQ,SAAS,GAAGR,OAAO,CAAC,aAAa,CAAC,AAAC;AACzC,IAAID,cAAc,GAAG,IAAI,AAAC,EAAC,qBAAqB"}