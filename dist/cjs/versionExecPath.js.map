{"version":3,"sources":["versionExecPath.ts"],"sourcesContent":["const path = require('path');\nconst accessSync = require('fs-access-sync-compat');\n\nconst constants = require('./constants');\nconst existsSync = require('./existsSync');\n\nconst SLEEP_MS = 200;\nconst installVersion = path.join(__dirname, 'installVersion.js');\n\nlet resolveVersion = null; // break dependencies\nlet execFunction = null; // break dependencies\nexport default function versionExecPath(versionString: string) {\n  if (!resolveVersion) resolveVersion = require('node-resolve-versions'); // break dependencies\n  if (!execFunction) execFunction = require('function-exec-sync'); // break dependencies\n\n  const versions = resolveVersion.sync(versionString);\n  if (versions.length > 1) throw new Error(`Multiple versions match: ${versionString} = ${versions.join(',')}. Please be specific`);\n  const version = versions[0];\n  const installPath = path.join(constants.installDirectory, version);\n  const binRoot = constants.isWindows ? installPath : path.join(installPath, 'bin');\n  const execPath = path.join(binRoot, constants.node);\n\n  // need to install\n  if (!existsSync(execPath)) {\n    execFunction({ cwd: process.cwd(), sleep: SLEEP_MS, callbacks: true }, installVersion, version);\n    accessSync(execPath); // confirm installed\n  }\n  return execPath;\n}\n"],"names":["versionExecPath","path","require","accessSync","constants","existsSync","SLEEP_MS","installVersion","join","__dirname","resolveVersion","execFunction","versionString","versions","sync","length","Error","version","installPath","installDirectory","binRoot","isWindows","execPath","node","cwd","process","sleep","callbacks"],"mappings":";;;;+BAWA;;;eAAwBA;;;AAXxB,IAAMC,OAAOC,QAAQ;AACrB,IAAMC,aAAaD,QAAQ;AAE3B,IAAME,YAAYF,QAAQ;AAC1B,IAAMG,aAAaH,QAAQ;AAE3B,IAAMI,WAAW;AACjB,IAAMC,iBAAiBN,KAAKO,IAAI,CAACC,WAAW;AAE5C,IAAIC,iBAAiB,MAAM,qBAAqB;AAChD,IAAIC,eAAe,MAAM,qBAAqB;AAC/B,SAASX,gBAAgBY,aAAqB;IAC3D,IAAI,CAACF,gBAAgBA,iBAAiBR,QAAQ,0BAA0B,qBAAqB;IAC7F,IAAI,CAACS,cAAcA,eAAeT,QAAQ,uBAAuB,qBAAqB;IAEtF,IAAMW,WAAWH,eAAeI,IAAI,CAACF;IACrC,IAAIC,SAASE,MAAM,GAAG,GAAG,MAAM,IAAIC,MAAM,AAAC,4BAA8CH,OAAnBD,eAAc,OAAwB,OAAnBC,SAASL,IAAI,CAAC,MAAK;IAC3G,IAAMS,UAAUJ,QAAQ,CAAC,EAAE;IAC3B,IAAMK,cAAcjB,KAAKO,IAAI,CAACJ,UAAUe,gBAAgB,EAAEF;IAC1D,IAAMG,UAAUhB,UAAUiB,SAAS,GAAGH,cAAcjB,KAAKO,IAAI,CAACU,aAAa;IAC3E,IAAMI,WAAWrB,KAAKO,IAAI,CAACY,SAAShB,UAAUmB,IAAI;IAElD,kBAAkB;IAClB,IAAI,CAAClB,WAAWiB,WAAW;QACzBX,aAAa;YAAEa,KAAKC,QAAQD,GAAG;YAAIE,OAAOpB;YAAUqB,WAAW;QAAK,GAAGpB,gBAAgBU;QACvFd,WAAWmB,WAAW,oBAAoB;IAC5C;IACA,OAAOA;AACT"}