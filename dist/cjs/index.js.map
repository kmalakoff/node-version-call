{"version":3,"sources":["index.ts"],"sourcesContent":["const functionExec = require('function-exec-sync');\nconst versionExecPath = require('./versionExecPath.ts');\nconst SLEEP_MS = 60;\n\nexport type VersionInfo = {\n  version: string;\n  callbacks: boolean;\n};\n\nexport default function call(version: string | VersionInfo, filePath: string /* arguments */): any {\n  const args = Array.prototype.slice.call(arguments, 2);\n  let callbacks = false;\n  if (typeof version !== 'string') {\n    callbacks = (version as VersionInfo).callbacks ?? false;\n    version = (version as VersionInfo).version;\n\n    // need to unwrap callbacks\n    if (callbacks && version === 'local') version = process.version;\n  }\n\n  // local - just call\n  if (version === 'local' && !callbacks) {\n    const fn = require(filePath);\n    return typeof fn == 'function' ? fn.apply(null, args) : fn;\n  }\n\n  // call a version of node\n  else {\n    const execPath = versionExecPath(version);\n    return functionExec.apply(null, [{ execPath, env: process.env, cwd: process.cwd(), sleep: SLEEP_MS, callbacks }, filePath].concat(args));\n  }\n}\n"],"names":["call","version","filePath","args","Array","prototype","slice","arguments","callbacks","process","fn","require","apply","execPath","versionExecPath","functionExec","env","cwd","sleep","SLEEP_MS","concat"],"mappings":"AAAA;;;;kBASwBA,IAAI;AAAb,SAASA,IAAI,CAACC,OAA6B,EAAEC,QAAgB,CAAC,eAAe,CAAhB,EAAuB;IACjG,IAAMC,IAAI,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACN,IAAI,CAACO,SAAS,EAAE,CAAC,CAAC,AAAC;IACtD,IAAIC,SAAS,GAAG,KAAK,AAAC;IACtB,IAAI,OAAOP,OAAO,KAAK,QAAQ,EAAE;YACnB,UAAkC;QAA9CO,SAAS,GAAG,CAAA,UAAkC,GAAlC,AAACP,OAAO,CAAiBO,SAAS,cAAlC,UAAkC,cAAlC,UAAkC,GAAI,KAAK,CAAC;QACxDP,OAAO,GAAG,AAACA,OAAO,CAAiBA,OAAO,CAAC;QAE3C,2BAA2B;QAC3B,IAAIO,SAAS,IAAIP,OAAO,KAAK,OAAO,EAAEA,OAAO,GAAGQ,OAAO,CAACR,OAAO,CAAC;KACjE;IAED,oBAAoB;IACpB,IAAIA,OAAO,KAAK,OAAO,IAAI,CAACO,SAAS,EAAE;QACrC,IAAME,EAAE,GAAGC,OAAO,CAACT,QAAQ,CAAC,AAAC;QAC7B,OAAO,OAAOQ,EAAE,IAAI,UAAU,GAAGA,EAAE,CAACE,KAAK,CAAC,IAAI,EAAET,IAAI,CAAC,GAAGO,EAAE,CAAC;KAC5D,MAGI;QACH,IAAMG,QAAQ,GAAGC,eAAe,CAACb,OAAO,CAAC,AAAC;QAC1C,OAAOc,YAAY,CAACH,KAAK,CAAC,IAAI,EAAE;YAAC;gBAAEC,QAAQ,EAARA,QAAQ;gBAAEG,GAAG,EAAEP,OAAO,CAACO,GAAG;gBAAEC,GAAG,EAAER,OAAO,CAACQ,GAAG,EAAE;gBAAEC,KAAK,EAAEC,QAAQ;gBAAEX,SAAS,EAATA,SAAS;aAAE;YAAEN,QAAQ;SAAC,CAACkB,MAAM,CAACjB,IAAI,CAAC,CAAC,CAAC;KAC1I;CACF;AA/BD,IAAMY,YAAY,GAAGJ,OAAO,CAAC,oBAAoB,CAAC,AAAC;AACnD,IAAMG,eAAe,GAAGH,OAAO,CAAC,sBAAsB,CAAC,AAAC;AACxD,IAAMQ,QAAQ,GAAG,EAAE,AAAC"}