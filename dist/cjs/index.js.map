{"version":3,"sources":["index.ts"],"sourcesContent":["const versionExecPath = require('./versionExecPath.ts');\n\nconst SLEEP_MS = 60;\nlet functionExec = null; // break dependencies\n\nexport type VersionInfo = {\n  version: string;\n  callbacks: boolean;\n};\n\nexport default function call(version: string | VersionInfo, filePath: string /* arguments */): any {\n  if (!functionExec) functionExec = require('function-exec-sync'); // break dependencies\n\n  const args = Array.prototype.slice.call(arguments, 2);\n  let callbacks = false;\n  if (typeof version !== 'string') {\n    callbacks = (version as VersionInfo).callbacks ?? false;\n    version = (version as VersionInfo).version;\n\n    // need to unwrap callbacks\n    if (callbacks && version === 'local') version = process.version;\n  }\n\n  // local - just call\n  if (version === 'local' && !callbacks) {\n    const fn = require(filePath);\n    return typeof fn == 'function' ? fn.apply(null, args) : fn;\n  }\n\n  // call a version of node\n  else {\n    const execPath = versionExecPath(version);\n    return functionExec.apply(null, [{ execPath, env: process.env, cwd: process.cwd(), sleep: SLEEP_MS, callbacks }, filePath].concat(args));\n  }\n}\n"],"names":["call","version","filePath","functionExec","require","args","Array","prototype","slice","arguments","callbacks","process","fn","apply","execPath","versionExecPath","env","cwd","sleep","SLEEP_MS","concat"],"mappings":"AAAA;;;;kBAUwBA,IAAI;AAAb,SAASA,IAAI,CAACC,OAA6B,EAAEC,QAAgB,CAAC,eAAe,CAAhB,EAAuB;IACjG,IAAI,CAACC,YAAY,EAAEA,YAAY,GAAGC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,qBAAqB;IAEtF,IAAMC,IAAI,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACR,IAAI,CAACS,SAAS,EAAE,CAAC,CAAC,AAAC;IACtD,IAAIC,SAAS,GAAG,KAAK,AAAC;IACtB,IAAI,OAAOT,OAAO,KAAK,QAAQ,EAAE;YACnB,UAAkC;QAA9CS,SAAS,GAAG,CAAA,UAAkC,GAAlC,AAACT,OAAO,CAAiBS,SAAS,cAAlC,UAAkC,cAAlC,UAAkC,GAAI,KAAK,CAAC;QACxDT,OAAO,GAAG,AAACA,OAAO,CAAiBA,OAAO,CAAC;QAE3C,2BAA2B;QAC3B,IAAIS,SAAS,IAAIT,OAAO,KAAK,OAAO,EAAEA,OAAO,GAAGU,OAAO,CAACV,OAAO,CAAC;KACjE;IAED,oBAAoB;IACpB,IAAIA,OAAO,KAAK,OAAO,IAAI,CAACS,SAAS,EAAE;QACrC,IAAME,EAAE,GAAGR,OAAO,CAACF,QAAQ,CAAC,AAAC;QAC7B,OAAO,OAAOU,EAAE,IAAI,UAAU,GAAGA,EAAE,CAACC,KAAK,CAAC,IAAI,EAAER,IAAI,CAAC,GAAGO,EAAE,CAAC;KAC5D,MAGI;QACH,IAAME,QAAQ,GAAGC,eAAe,CAACd,OAAO,CAAC,AAAC;QAC1C,OAAOE,YAAY,CAACU,KAAK,CAAC,IAAI,EAAE;YAAC;gBAAEC,QAAQ,EAARA,QAAQ;gBAAEE,GAAG,EAAEL,OAAO,CAACK,GAAG;gBAAEC,GAAG,EAAEN,OAAO,CAACM,GAAG,EAAE;gBAAEC,KAAK,EAAEC,QAAQ;gBAAET,SAAS,EAATA,SAAS;aAAE;YAAER,QAAQ;SAAC,CAACkB,MAAM,CAACf,IAAI,CAAC,CAAC,CAAC;KAC1I;CACF;AAlCD,IAAMU,eAAe,GAAGX,OAAO,CAAC,sBAAsB,CAAC,AAAC;AAExD,IAAMe,QAAQ,GAAG,EAAE,AAAC;AACpB,IAAIhB,YAAY,GAAG,IAAI,AAAC,EAAC,qBAAqB"}