{"version":3,"sources":["index.js"],"sourcesContent":["'use strict';\n\n//TODO: handle reviver/dehydrate function like normal\n//and handle indentation, like normal.\n//if anyone needs this... please send pull request.\n\nexports.stringify = function stringify(o) {\n  if (o && Buffer.isBuffer(o)) return JSON.stringify(':base64:' + o.toString('base64'));\n\n  if (o && o.toJSON) o = o.toJSON();\n\n  if (o && 'object' === typeof o) {\n    var s = '';\n    var array = Array.isArray(o);\n    s = array ? '[' : '{';\n    var first = true;\n\n    for (var k in o) {\n      var ignore = 'function' == typeof o[k] || (!array && 'undefined' === typeof o[k]);\n      if (Object.hasOwnProperty.call(o, k) && !ignore) {\n        if (!first) s += ',';\n        first = false;\n        if (array) {\n          s += stringify(o[k]);\n        } else if (o[k] !== void 0) {\n          s += stringify(k) + ':' + stringify(o[k]);\n        }\n      }\n    }\n\n    s += array ? ']' : '}';\n\n    return s;\n  } else if ('string' === typeof o) {\n    return JSON.stringify(/^:/.test(o) ? ':' + o : o);\n  } else if ('undefined' === typeof o) {\n    return 'null';\n  } else return JSON.stringify(o);\n};\n\nexports.parse = function (s) {\n  return JSON.parse(s, function (key, value) {\n    if ('string' === typeof value) {\n      if (/^:base64:/.test(value)) return new Buffer(value.substring(8), 'base64');\n      else return /^:/.test(value) ? value.substring(1) : value;\n    }\n    return value;\n  });\n};\n"],"names":["exports","stringify","o","Buffer","isBuffer","JSON","toString","toJSON","s","array","Array","isArray","first","k","ignore","Object","hasOwnProperty","call","test","parse","key","value","substring"],"mappings":"AAAA,YAAY,CAAC;AAEb,qDAAqD;AACrD,sCAAsC;AACtC,mDAAmD;AAEnDA,OAAO,CAACC,SAAS,GAAG,SAASA,SAAS,CAACC,CAAC,EAAE;IACxC,IAAIA,CAAC,IAAIC,MAAM,CAACC,QAAQ,CAACF,CAAC,CAAC,EAAE,OAAOG,IAAI,CAACJ,SAAS,CAAC,UAAU,GAAGC,CAAC,CAACI,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;IAEtF,IAAIJ,CAAC,IAAIA,CAAC,CAACK,MAAM,EAAEL,CAAC,GAAGA,CAAC,CAACK,MAAM,EAAE,CAAC;IAElC,IAAIL,CAAC,IAAI,QAAQ,KAAK,OAAOA,CAAC,EAAE;QAC9B,IAAIM,CAAC,GAAG,EAAE,AAAC;QACX,IAAIC,KAAK,GAAGC,KAAK,CAACC,OAAO,CAACT,CAAC,CAAC,AAAC;QAC7BM,CAAC,GAAGC,KAAK,GAAG,GAAG,GAAG,GAAG,CAAC;QACtB,IAAIG,KAAK,GAAG,IAAI,AAAC;QAEjB,IAAK,IAAIC,CAAC,IAAIX,CAAC,CAAE;YACf,IAAIY,MAAM,GAAG,UAAU,IAAI,OAAOZ,CAAC,CAACW,CAAC,CAAC,IAAK,CAACJ,KAAK,IAAI,WAAW,KAAK,OAAOP,CAAC,CAACW,CAAC,CAAC,AAAC,AAAC;YAClF,IAAIE,MAAM,CAACC,cAAc,CAACC,IAAI,CAACf,CAAC,EAAEW,CAAC,CAAC,IAAI,CAACC,MAAM,EAAE;gBAC/C,IAAI,CAACF,KAAK,EAAEJ,CAAC,IAAI,GAAG,CAAC;gBACrBI,KAAK,GAAG,KAAK,CAAC;gBACd,IAAIH,KAAK,EAAE;oBACTD,CAAC,IAAIP,SAAS,CAACC,CAAC,CAACW,CAAC,CAAC,CAAC,CAAC;iBACtB,MAAM,IAAIX,CAAC,CAACW,CAAC,CAAC,KAAK,KAAK,CAAC,EAAE;oBAC1BL,CAAC,IAAIP,SAAS,CAACY,CAAC,CAAC,GAAG,GAAG,GAAGZ,SAAS,CAACC,CAAC,CAACW,CAAC,CAAC,CAAC,CAAC;iBAC3C;aACF;SACF;QAEDL,CAAC,IAAIC,KAAK,GAAG,GAAG,GAAG,GAAG,CAAC;QAEvB,OAAOD,CAAC,CAAC;KACV,MAAM,IAAI,QAAQ,KAAK,OAAON,CAAC,EAAE;QAChC,OAAOG,IAAI,CAACJ,SAAS,CAAC,KAAKiB,IAAI,CAAChB,CAAC,CAAC,GAAG,GAAG,GAAGA,CAAC,GAAGA,CAAC,CAAC,CAAC;KACnD,MAAM,IAAI,WAAW,KAAK,OAAOA,CAAC,EAAE;QACnC,OAAO,MAAM,CAAC;KACf,MAAM,OAAOG,IAAI,CAACJ,SAAS,CAACC,CAAC,CAAC,CAAC;CACjC,CAAC;AAEFF,OAAO,CAACmB,KAAK,GAAG,SAAUX,CAAC,EAAE;IAC3B,OAAOH,IAAI,CAACc,KAAK,CAACX,CAAC,EAAE,SAAUY,GAAG,EAAEC,KAAK,EAAE;QACzC,IAAI,QAAQ,KAAK,OAAOA,KAAK,EAAE;YAC7B,IAAI,YAAYH,IAAI,CAACG,KAAK,CAAC,EAAE,OAAO,IAAIlB,MAAM,CAACkB,KAAK,CAACC,SAAS,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;iBACxE,OAAO,KAAKJ,IAAI,CAACG,KAAK,CAAC,GAAGA,KAAK,CAACC,SAAS,CAAC,CAAC,CAAC,GAAGD,KAAK,CAAC;SAC3D;QACD,OAAOA,KAAK,CAAC;KACd,CAAC,CAAC;CACJ,CAAC"}